<!doctype html>
<html lang="ja">
<head>
	<meta charset="utf-8" />
	<meta name="viewport" content="width=device-width,initial-scale=1" />
	<title>プライバシーポリシー</title>
	<!-- 簡単なスタイル -->
	<style>
		body { font-family: system-ui, -apple-system, "Helvetica Neue", Arial; line-height: 1.6; padding: 24px; background:#fafafa; color:#222; }
		.container { max-width:900px; margin:0 auto; background:#fff; padding:28px; box-shadow:0 2px 8px rgba(0,0,0,0.06); border-radius:6px; }
		.markdown-content h1,h2,h3,h4 { color:#111; margin-top:1.2em; }
		.markdown-content pre { background:#f6f8fa; padding:12px; overflow:auto; border-radius:6px; }
		.markdown-content code { background:#f6f8fa; padding:2px 6px; border-radius:4px; }
		a { color:#0366d6; text-decoration:none; }
		a:hover { text-decoration:underline; }
	</style>
	<!-- marked: lightweight markdown -> html ライブラリ -->
	<script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
</head>
<body>
	<div class="container">
		<h1>プライバシーポリシー</h1>
		<div id="content" class="markdown-content">
			<!-- マークダウンの読み込み中表示 -->
			<p>読み込み中...</p>
		</div>
	</div>

	<noscript>
		<div class="container">
			<p>JavaScript が無効です。privacypolicy.md を直接開いてください。</p>
		</div>
	</noscript>

	<script>
		(async function(){
			const mdPath = './privacypolicy.md';
			const contentEl = document.getElementById('content');

			try {
				const res = await fetch(mdPath);
				if (!res.ok) throw new Error('Failed to fetch: ' + res.status);
				const md = await res.text();

				// marked のオプション（必要に応じて調整）
				marked.setOptions({
					headerIds: true,
					mangle: false,
					breaks: true
				});

				// Markdown を HTML に変換して挿入
				contentEl.innerHTML = marked.parse(md);

				// すべての外部リンクを新しいタブで開く（同一ドメイン外判定は簡易）
				Array.from(contentEl.querySelectorAll('a')).forEach(a => {
					const href = a.getAttribute('href') || '';
					if (href.startsWith('http')) a.setAttribute('target','_blank');
				});
			} catch (err) {
				console.error(err);
				contentEl.innerHTML = '<p>プライバシーポリシーの読み込みに失敗しました。privacypolicy.md が同じディレクトリにあるか確認してください。</p>';
			}
		})();
	</script>
</body>
</html>